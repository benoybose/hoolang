cmake_minimum_required(VERSION 3.6)
CMAKE_POLICY(SET CMP0074 NEW)
PROJECT(hoolang)

SET(CMAKE_VERBOSE_MAKEFILE ON)
MESSAGE("CMake Version: ${CMAKE_VERSION}")
SET(CMAKE_CXX_STANDARD 14)

IF (${CMAKE_COMPILER_IS_GNUCC} MATCHES 1)
    SET(COMPILE_FLAGS "-m64")
    SET(LINK_FLAGS "-m64")
    SET(CMAKE_CXX_FLAGS "-static-libgcc -static-libstdc++")
ENDIF ()

INCLUDE("${CMAKE_SOURCE_DIR}/packages/index.cmake")

SET(Boost_USE_STATIC_LIBS ON)
SET(Boost_USE_MULTITHREADED ON)
SET(Boost_USE_STATIC_RUNTIME ON)

FIND_PACKAGE(antlr4-runtime REQUIRED)
FIND_PACKAGE(antlr4-generator REQUIRED)
FIND_PACKAGE(Java REQUIRED)

ADD_SUBDIRECTORY(./hoo)
ADD_SUBDIRECTORY(./hooc)
ENABLE_TESTING()
ADD_TEST(NAME test_hooc COMMAND hooc/hooc_test)